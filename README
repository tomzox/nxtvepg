Hi there,

in this software package you find a decoder for Nextview - an Electronic
TV Programme Guide for the analog domain (as opposed to the various digital
EPGs that come with most digital broadcasts). It allows you to decode and
browse TV programme listings for most of the major networks in Germany,
Austria, France and Switzerland.

Currently Nextview EPG is transmitted by:
- in Germany and Austria: Kabel1, Pro7, 3Sat, RTL-II.
- in Switzerland: SF1, TSR1, TSI1, EuroNews.
- in France: Canal+, M6.
- in Turkey: TRT.

If you don't receive any of those, then this software unfortunately is
almost useless to you, except for a demo mode. For more details please
refer to the documentation in the "Help" menus or the UNIX manual page.

The Nextview standard was developed by the major European consumer electronics
manufacturers under the hood of the European Telecommunications Standards
Institute (http://www.etsi.org/) in 1995-1997. The author of this software
has no connections whatsoever to the ETSI - but he still hopes this software
distribution will be kindly tolerated.


System requirements:

Hardware requirements are a PC or workstation with a 90 MHz Intel Pentium
or equivalently (or more) powerful CPU, and a TV tuner card based on the
Booktree chip Bt848 or Bt878. Almost all TV cards nowadays except the
ATI "TV Wonder" are built around one of the Booktree chips.

Linux software requirements:
- kernel >= 2.0.35 (upgrade to 2.2.x highly recommended for bttv users!)
- bttv driver (video4linux), version >= 0.7.35 recommended
- GNU C Compiler, unless you got nxtvepg in a precompiled RPM archive
- Tcl/Tk version 8.0 or later (8.3 recommended)
  available from http://www.scriptics.com/

NetBSD software requirements:
- kernel >= 1.5 including the bktr driver 2.17 or later,
  available from http://vulture.dmem.strath.ac.uk/bt848/
- GNU C Compiler, unless you got nxtvepg in a precompiled NetBSD package
- Tcl/Tk version 8.0 or later (8.3 recommended)
  available from http://www.scriptics.com/

Windows software requirements:
- Nothing actually: nxtvepg is shipped with all the required components.
- Supported OS: Windows NT, Windows 2000, Windows XP, Windows 95/98/ME.
- On Windows NT and 2000: you need to be in the Admininstrator group.

If you want to compile for Windows you also need:
- Cygwin GNU make and gcc compiler, see http://www.cygwin.com/
  including the mingw ("Minimalistic GNU for Windows") and win32 header files
- Tcl/Tk 8.3.2, available from http://www.scriptics.com/
  (I've patched the tk83.dll twice: (1) to catch shutdown messages and (2) to
  disable use of the Windows MessageBox() in tk_messageBox because it crashed
  the program. Hence I recommend to keep using the DLL that comes with nxtvepg,
  or apply the patches described in README.tcl83 to the tk8.3.2 sources)
- Perl 5 to generate the help menus from the documentation in POD format
  (not essential unless you want to modify the help menus)
- If you want to compile the driver and the interface library dsdrv.dll
  you also need the Microsoft Visual C++ compiler and the Device Driver
  Development Kit. Driver sources are available at http://www.dscaler.org/


UNIX installation procedure (when compiling from source):

- Recommended: first install a TV application like "xawtv" and a teletext
  decoder like "alevt" to be sure the video and vbi drivers work fine.
- Check the path definitions at the top of the Makefile, esp. for Tcl/Tk
- make
  if compilation fails, check the type definitions in epgctl/mytypes.h first.
  Required types are: schar, uchar, sint, uint, slong, ulong.
- If you compile on a non-supported operating system or if you don't have
  bttv, then compile epgvbi/btdrv4dummy instead of btdrv4linux (then you
  can use network acquisition mode to receive data from a supported platform)
- make install
- Invoke the application and start a provider scan from the Configure menu.
  Further details can be found in the man page or help menu, section
  "Getting Started"

If the GUI shows up but does not react to any input, you probably
need to tell Tcl/Tk where to find it's libraries. To do so, correct
the paths in TCL_LIBRARY_PATH and TK_LIBRARY_PATH in the Makefile.
If you need to change anything besides the Makefile, please let me
know about it (i.e. send me the diffs)


Windows installation procedure:

- Unpack the zip file into an empty directory.

- Invoke the executable nxtvepg.exe
  If there are any warning or error message popups from the Bt8x8
  driver, please refer to the list below.

- Set up the driver in the "TV card input" menu.  There's extensive
  help available in the documentation, sections "Getting Started" and
  "Configuration: TV card input"

- Start an EPG scan. If the scan just runs through without finding
  any network IDs, check your TV card settings, particularily "PLL init"
  (or check your antenna cable) and try again. If the scan still fails,
  there are two other possibilities for Nextview reception:
  1: Set acquisition mode "external". Then stop acquisition and tune in a
  provider channel with a separate application, e.g. a TV viewer. Then quit
  the other application again and start acquisition. See 'Getting Started'
  and the help for the acquisition mode dialog for more information.
  2: Alternatively you can try an external input, i.e. supply a provider's
  TV channel via the Composite inputs, e.g. from your VCR.  In rare cases
  the descriptions of input sources in the TV card popup may be wrong, so
  try all inputs, e.g.  "Composite 2" even if you connected the cable to #1.

Explanation of Windows Bt8x8 driver error messages:

- "Failed to load the Bt8x8 driver. (...)"
  This message can unfortunately have many causes. For the most probable
  causes an explanation is appended to the message.  The following hints
  may help you:

  1. You may not have the driver files "dsdrv4.sys" and "dsdrv4.vxd"
  in the working directory of nxtvepg. This may happen if you specify
  a working directory (e.g. in a shortcut definition) that differs from
  the one that contains the nxtvepg.exe. Don't do that, use the -dbdir
  and -rcfile options instead to specify where configuration files are
  searched for.

  2. On Windows NT and Windows 2000 you need to have special privileges
  to start the driver (e.g. on NT you should be in the Administrator group)

  3. Another application using the DScaler driver may already be runing.
  Currently the driver can be used only by one application at the same
  time, even if you have more than one TV card.

  4. You're using driver files of a wrong version.  You must use the
  version that comes with nxtvepg.

  5. The "DSdrv4" service entry in the registry may be messed up.
  You can remove all keys that match "dsdrv". Note:  you should delete
  not only those in the CurrentControlSet, but those in all control sets.

  If none of these seem to be the cause, you can enable logging to a
  file in the "TV card input" dialog in the Configure menu.  The log
  file "dsdrv.log" is created in the nxtvepg home directory.  If you
  don't get the driver to work, feel free to mail the log file and
  a dump of the dsdrv4 service registry entry to me.

- "Bt8x8 card #%d not found (found %d cards)"
  If there's at least one card found, lower the card index below the
  number of available cards, i.e. if you have two cards, specify index
  0 or 1. The card index can be given either on the command line with
  the -card option or in the "TV card input" configuration dialog.

- "PCI-Card #x (with Bt8xx chip) cannot be locked!",
  There may be a different application already using the TV card. On
  M$ Windows you cannot run, e.g. a TV application in parallel to
  nxtvepg (unless the TV app supports interaction with nxtvepg) or
  teletext decoders (if you have only one TV card).

- "Warning: no tuner found on Bt8x8 I2C bus"
  No tuner was found during the I2C bus scan. This failure does not
  depend on any configuration option, so you're simply out of luck.
  If you know an open-source software that supports your hardware, let
  me know and I'll try to support it in nxtvepg, too. In the meanwhile
  you only can use the "Passive" acquisition mode, i.e. you have to
  set up input source and channel with a different application before
  starting nxtvepg.

- "Risc Memory (83 KB Contiguous) not Allocated",
  "VBI Memory for DMA not Allocated". These mesages mean that the kernel
  could not allocate RAM for data transfers from the TV card. Reboot and
  try again, this should normally not happen because the amount of memory
  which is allocated is relatively small.

Before you mail me, please try to get DScaler to work (www.dscaler.org)
My Windows Bt8x8 driver handling is heavily based upon that software.
Since I'm not a M$ Windows software developer my understanding of Windows
specific problems is rather limited.



Problem and bug reports:

Before you email me any bug reports, please check the manual page as well
as the TODO and CHANGES files. And be *comprehensive* in describing your
problem. At least include names and version numbers of your operating system,
nxtvepg, possibly the bttv driver and any other software that may be
involved. If it looks like a hardware related problem (e.g. acquisition
does not work at all) also include the exact name of you TV card hardware.
If MultiDec works with the same hardware, mail me the version number and
describe your hardware configuration settings. If there is an error message,
quote the message in full length and exactly as printed, even if you do not
understand its relevance.

In case nxtvepg crashes, or if you suspect internal errors, you need to
recompile with debug support to allow me to analyze the problem.  Please
add the -g option to CFLAGS in the Makefile and enable all debug options in
mytypes.h by assigning ON instead of OFF. If you know which modules are
responsible, you can also comment out DPRINTF_OFF at the top of those
modules. Then try to reproduce your problem and send me the resulting
debug.out log file.


The latest version of this software is available at:
http://nxtvepg.tripod.com/

You can reach me at: tomzo@nefkom.net

have fun.

-tom
